global:
  scrape_interval: 15s # Standard for production (balance between resolution and storage)
  evaluation_interval: 15s

scrape_configs:
  # 1. Prometheus Self-Monitoring
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']

  # 2. Node Exporter (Infrastructure Metrics)
  # In production, we group targets dynamically
  - job_name: 'node_exporter'
    static_configs:
      - targets:
        - '{{ frontend_ip }}:9100'
        - '{{ backend_ip }}:9100'
        - '{{ db_ip }}:9100'
        - '{{ bastion_ip }}:9100'

  # 3. Backend API (Application Metrics)
  # Only enabled if your code exposes /metrics
  # - job_name: 'electromart-backend'
  #   static_configs:
  #     - targets: ['{{ backend_ip }}:5000']